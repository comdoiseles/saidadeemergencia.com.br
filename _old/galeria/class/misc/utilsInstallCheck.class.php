<?php
//-------------------------------------------------------------------------------------------------
// 	OSW - Gerenciador Galeria de Imagens
// 	http://www.onlinesolucoesweb.com.br
// 	2010
//-------------------------------------------------------------------------------------------------
class UtilInstallCheck
{
	
	//-----------------------------------------------------------------------------------------------
	//	Members
	//-----------------------------------------------------------------------------------------------
	private $hErr;
	
	
	//-----------------------------------------------------------------------------------------------
	//	Constructor
	//-----------------------------------------------------------------------------------------------
	//	handle $hErr
	//	return void
	//-----------------------------------------------------------------------------------------------
	public function __construct($hErr)
	{
		$this->hErr = $hErr;
		
		// check version
		$this->checkPHPVersion();
		
		// check files
		$this->checkFiles();
	}
	
	
	//-----------------------------------------------------------------------------------------------
	//	Check PHP Version
	//-----------------------------------------------------------------------------------------------
	//	return void
	//-----------------------------------------------------------------------------------------------
	private function checkPHPVersion()
	{
		$sVersion = phpversion();
		$iVersion = (int)$sVersion{0};
		
		// version 5 or above
		if($iVersion < 5)
			$this->hErr->add(50);
	}
	
	
	//-----------------------------------------------------------------------------------------------
	// Check Files
	//-----------------------------------------------------------------------------------------------
	//	return void
	//-----------------------------------------------------------------------------------------------
	private function checkFiles()
	{
		// files
		if(!is_writeable('../albums.xml'))
			$this->hErr->add(51);
			
		if(!is_writeable('../inc/globals.inc.php'))
			$this->hErr->add(52);
			
		// folders
		if(!is_writeable('../largeimages'))
			$this->hErr->add(53);
			
		if(!is_writeable('../temp'))
			$this->hErr->add(54);
			
		if(!is_writeable('../thumbs'))
			$this->hErr->add(55);
	}
}
?>